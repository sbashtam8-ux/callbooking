<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QA / Training Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Calibri&display=swap" rel="stylesheet">
<style>
    * { box-sizing: border-box; font-family: 'Calibri', sans-serif; }
    body { margin:0; background: #f5f6fa; color:#2f3640; }
    header { background: #3742fa; color:white; padding:20px; text-align:center; font-size:28px; font-weight:bold; }
    nav { display:flex; justify-content:center; background:#2f3542; }
    nav a { padding:14px 20px; color:white; text-decoration:none; transition:0.3s; }
    nav a.active, nav a:hover { background:#57606f; }
    .container { padding:20px; }
    h2 { margin-bottom:10px; }
    .card { background:white; border-radius:12px; padding:20px; margin-bottom:20px; box-shadow:0 10px 20px rgba(0,0,0,0.1); }
    input, select, textarea, button { width:100%; padding:10px; margin:6px 0; border-radius:6px; border:1px solid #dcdde1; }
    button { background:#3742fa; color:white; border:none; cursor:pointer; transition:0.3s; }
    button:hover { background:#2f3542; }
    .flex { display:flex; gap:20px; flex-wrap:wrap; }
    .flex .card { flex:1; min-width:200px; }
    .chart { height:200px; }
    /* Login */
    #login-container { display:flex; justify-content:center; align-items:center; height:100vh; background:#f5f6fa; }
    #login-box { background:white; padding:40px; border-radius:12px; box-shadow:0 10px 20px rgba(0,0,0,0.2); width:300px; }
    #login-box h2 { text-align:center; margin-bottom:20px; }
    #login-box input { margin-bottom:10px; }
    #login-box button { margin-top:10px; }
    /* Table */
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    table, th, td { border:1px solid #dcdde1; }
    th, td { padding:10px; text-align:left; }
    .approved { color:green; font-weight:bold; }
    .rejected { color:red; font-weight:bold; }
</style>
</head>
<body>

<!-- Login Page -->
<div id="login-container">
    <div id="login-box">
        <h2>QA / Training Login</h2>
        <input type="text" id="username" placeholder="Username">
        <input type="password" id="password" placeholder="Password">
        <button onclick="login()">Login</button>
        <p id="login-error" style="color:red;"></p>
    </div>
</div>

<!-- Main Content -->
<div id="main-content" style="display:none;">

<header>QA / Training</header>

<nav>
    <a href="#" class="active" onclick="showPage('home', this)">Home</a>
    <a href="#" onclick="showPage('trainers', this)">Membres</a>
    <a href="#" onclick="showPage('coordination', this)">Coordination</a>
    <a href="#" onclick="showPage('dashboard', this)">Dashboard</a>
</nav>

<div class="container">

    <!-- Home Page -->
    <div id="home" class="page">
        <div class="card">
            <h2>Bienvenue sur QA / Training</h2>
            <p>Bienvenue sur la plateforme officielle du département formation. 
            Cette plateforme professionnelle est dédiée à la gestion des formateurs, 
            à la coordination des experts et au suivi des sessions de formation. 
            Tous les processus de formation seront désormais enregistrés ici par les formateurs.</p>
        </div>
    </div>

    <!-- Trainers Page -->
    <div id="trainers" class="page" style="display:none;">
        <div class="card">
            <h2>Register Trainer</h2>
            <input type="text" id="trainer-name" placeholder="Full Name">
            <input type="text" id="trainer-role" value="CS_Specialist_QA/Training" readonly>
            <select id="training-type">
                <option value="d1">Formation 1</option>
                <option value="d2">Formation 2</option>
                <option value="periodic">Formation périodique</option>
                <option value="accompaniment">Formation accompagnement</option>
            </select>
            <textarea id="description" placeholder="Optional"></textarea>
            <input type="number" id="trainee-count" placeholder="Nombre de participants">
            <button onclick="addTrainerForm()">Register</button>
        </div>
        <div class="card">
            <h2>Registered Forms</h2>
            <table id="trainer-table">
                <thead>
                    <tr>
                        <th>Full Name</th>
                        <th>Role</th>
                        <th>Training Type</th>
                        <th>Description</th>
                        <th>Trainee Count</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- Coordination Page -->
    <div id="coordination" class="page" style="display:none;">
        <div class="card">
            <h2>Register Coordination</h2>
            <input type="text" id="coord-name" placeholder="Coordinator Full Name">
            <input type="text" id="expert-name" placeholder="Expert Full Name">
            <input type="date" id="request-date" placeholder="Request Date">
            <select id="training-type-coord">
                <option value="d1">Formation 1</option>
                <option value="d2">Formation 2</option>
                <option value="periodic">Formation périodique</option>
                <option value="accompaniment">Formation accompagnement</option>
            </select>
            <button onclick="addCoordForm()">Register</button>
        </div>
        <div class="card">
            <h2>Registered Forms</h2>
            <table id="coord-table">
                <thead>
                    <tr>
                        <th>Coordinator</th>
                        <th>Expert</th>
                        <th>Request Date</th>
                        <th>Training Type</th>
                        <th>Manager Decision</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard" class="page" style="display:none;">
        <div class="flex">
            <div class="card">
                <h3>Formation 1</h3>
                <canvas id="chart1" class="chart"></canvas>
            </div>
            <div class="card">
                <h3>Formation 2</h3>
                <canvas id="chart2" class="chart"></canvas>
            </div>
            <div class="card">
                <h3>Formation périodique</h3>
                <canvas id="chart3" class="chart"></canvas>
            </div>
            <div class="card">
                <h3>Formation accompagnement</h3>
                <canvas id="chart4" class="chart"></canvas>
            </div>
        </div>
    </div>

</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Login Logic
    function login() {
        const user = document.getElementById('username').value;
        const pass = document.getElementById('password').value;
        const error = document.getElementById('login-error');

        if ((user==='manager' && pass==='snapp123') || (user==='trainer' && pass==='trainer')) {
            document.getElementById('login-container').style.display='none';
            document.getElementById('main-content').style.display='block';
            error.innerText='';
        } else {
            error.innerText='Invalid credentials';
        }
    }

    // Page Navigation
    function showPage(page, el){
        document.querySelectorAll('.page').forEach(p=>p.style.display='none');
        document.getElementById(page).style.display='block';
        document.querySelectorAll('nav a').forEach(a=>a.classList.remove('active'));
        el.classList.add('active');
    }

    // Trainer Form
    function addTrainerForm(){
        const name = document.getElementById('trainer-name').value;
        const role = document.getElementById('trainer-role').value;
        const type = document.getElementById('training-type').value;
        const desc = document.getElementById('description').value;
        const count = document.getElementById('trainee-count').value;

        if(!name || !type) return alert('Please fill required fields');

        const table = document.querySelector('#trainer-table tbody');
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${name}</td><td>${role}</td><td>${type}</td><td>${desc}</td><td>${count}</td>
                        <td><button onclick="this.parentElement.parentElement.remove()">Delete</button></td>`;
        table.appendChild(tr);

        updateCharts();
        document.getElementById('trainer-name').value='';
        document.getElementById('description').value='';
        document.getElementById('trainee-count').value='';
    }

    // Coordination Form
    function addCoordForm(){
        const coord = document.getElementById('coord-name').value;
        const expert = document.getElementById('expert-name').value;
        const date = document.getElementById('request-date').value;
        const type = document.getElementById('training-type-coord').value;
        if(!coord || !expert) return alert('Fill required fields');

        const table = document.querySelector('#coord-table tbody');
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${coord}</td><td>${expert}</td><td>${date}</td><td>${type}</td>
                        <td>Pending</td><td><button onclick="approveCoord(this)">Approve</button>
                        <button onclick="rejectCoord(this)">Reject</button>
                        <button onclick="this.parentElement.parentElement.remove()">Delete</button></td>`;
        table.appendChild(tr);
        document.getElementById('coord-name').value='';
        document.getElementById('expert-name').value='';
        document.getElementById('request-date').value='';
    }

    function approveCoord(btn){ btn.parentElement.parentElement.cells[4].innerText='Approved'; updateCharts(); }
    function rejectCoord(btn){ btn.parentElement.parentElement.cells[4].innerText='Rejected'; updateCharts(); }

    // Charts
    const ctx1 = document.getElementById('chart1').getContext('2d');
    const ctx2 = document.getElementById('chart2').getContext('2d');
    const ctx3 = document.getElementById('chart3').getContext('2d');
    const ctx4 = document.getElementById('chart4').getContext('2d');

    const chart1 = new Chart(ctx1, { type:'bar', data:{ labels:[], datasets:[{label:'Participants', data:[], backgroundColor:'#3742fa'}] }, options:{responsive:true} });
    const chart2 = new Chart(ctx2, { type:'bar', data:{ labels:[], datasets:[{label:'Participants', data:[], backgroundColor:'#3742fa'}] }, options:{responsive:true} });
    const chart3 = new Chart(ctx3, { type:'bar', data:{ labels:[], datasets:[{label:'Participants', data:[], backgroundColor:'#3742fa'}] }, options:{responsive:true} });
    const chart4 = new Chart(ctx4, { type:'bar', data:{ labels:[], datasets:[{label:'Participants', data:[], backgroundColor:'#3742fa'}] }, options:{responsive:true} });

    function updateCharts(){
        const counts = {d1:0,d2:0,periodic:0,accompaniment:0};
        document.querySelectorAll('#trainer-table tbody tr').forEach(r=>{
            const type = r.cells[2].innerText;
            const count = parseInt(r.cells[4].innerText) || 0;
            if(type==='d1') counts.d1 += count;
            if(type==='d2') counts.d2 += count;
            if(type==='periodic') counts.periodic += count;
            if(type==='accompaniment') counts.accompaniment += count;
        });
        chart1.data.labels = ['Participants']; chart1.data.datasets[0].data = [counts.d1]; chart1.update();
        chart2.data.labels = ['Participants']; chart2.data.datasets[0].data = [counts.d2]; chart2.update();
        chart3.data.labels = ['Participants']; chart3.data.datasets[0].data = [counts.periodic]; chart3.update();
        chart4.data.labels = ['Participants']; chart4.data.datasets[0].data = [counts.accompaniment]; chart4.update();
    }
</script>
</body>
</html>
