<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QA TEAM Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Calibri&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:'Calibri',sans-serif; }
body { background:#f0f2f5; color:#333; }
header { background:#1f2937; color:#fff; padding:20px; display:flex; justify-content:space-between; align-items:center; }
header h1 { font-size:28px; }
nav a { margin-left:20px; text-decoration:none; color:#fff; padding:5px 10px; border-radius:5px; transition:0.3s; }
nav a.active, nav a:hover { background:#3b82f6; }
.container { max-width:1200px; margin:20px auto; padding:20px; }
.card { background:#fff; border-radius:15px; padding:20px; margin-bottom:20px; box-shadow:0 10px 25px rgba(0,0,0,0.1); transform:perspective(1000px) rotateY(0deg); transition:0.4s; }
.card:hover { transform:perspective(1000px) rotateY(5deg); }
.login-container { display:flex; justify-content:center; align-items:center; height:80vh; }
.login-box { background:#fff; padding:40px; border-radius:15px; box-shadow:0 10px 25px rgba(0,0,0,0.2); width:350px; }
.login-box h2 { margin-bottom:20px; text-align:center; }
.login-box input { width:100%; padding:10px; margin-bottom:15px; border-radius:5px; border:1px solid #ccc; }
.login-box button { width:100%; padding:10px; border:none; border-radius:5px; background:#3b82f6; color:#fff; font-size:16px; cursor:pointer; transition:0.3s; }
.login-box button:hover { background:#2563eb; }
.dashboard { display:grid; grid-template-columns:repeat(2,1fr); gap:20px; }
.dashboard canvas { background:#fff; border-radius:15px; padding:20px; box-shadow:0 10px 25px rgba(0,0,0,0.1); }
form input, form select, form textarea { width:100%; padding:10px; margin-bottom:15px; border-radius:5px; border:1px solid #ccc; }
form textarea::placeholder { color:#aaa; }
form button { padding:10px 20px; border:none; border-radius:5px; background:#10b981; color:#fff; cursor:pointer; transition:0.3s; }
form button:hover { background:#059669; }
.list-entry { background:#e0f2fe; padding:10px; margin-bottom:10px; border-radius:8px; display:flex; justify-content:space-between; align-items:center; }
.list-entry button { background:#ef4444; color:#fff; border:none; border-radius:5px; padding:5px 10px; cursor:pointer; }
.status-approved { color:#10b981; font-weight:bold; }
.status-rejected { color:#ef4444; font-weight:bold; }
.status-pending { color:#f59e0b; font-weight:bold; }
</style>
</head>
<body>

<header>
<h1>QA TEAM Platform</h1>
<nav>
<a href="#" class="active" data-page="home">خانه</a>
<a href="#" data-page="trainers">مربیان</a>
<a href="#" data-page="coordination">Coordination</a>
<a href="#" data-page="dashboard">داشبورد مدیریتی</a>
</nav>
</header>

<div class="container" id="home">
<div class="card">
<h2>تیم آموزش QA</h2>
<p>این پلتفرم سازمانی برای مدیریت مربیان، هماهنگی کارشناسان و پیگیری آموزش‌ها طراحی شده است. از این پس تمامی فرآیندهای آموزش توسط مربیان و کوردیناتورها ثبت می‌شود. مدیر می‌تواند تمام فعالیت‌ها را به صورت نموداری، تایید یا رد، و پیگیری دقیق مشاهده کند. هدف افزایش شفافیت، دقت و کارایی تیم آموزش است.</p>
</div>
</div>

<div class="container" id="trainers" style="display:none;">
<div class="card">
<h2>فرم ثبت مربی</h2>
<form id="trainerForm">
<input type="text" placeholder="نام و نام خانوادگی" name="trainerName" required>
<input type="text" placeholder="سمت" value="CS_Specialist_QA/Training" readonly>
<select name="trainingTitle" required>
<option value="آموزش دوره اول">آموزش دوره اول</option>
<option value="آموزش دوره دوم">آموزش دوره دوم</option>
<option value="آموزش دوره‌ای">آموزش دوره‌ای</option>
<option value="آموزش همراهی">آموزش همراهی</option>
</select>
<textarea placeholder="توضیحات (اختیاری)" name="desc"></textarea>
<input type="number" placeholder="تعداد نیوجوینرها" name="newJoiners" required>
<input type="date" name="date" required>
<button type="submit">ثبت</button>
</form>
<div id="trainerList"></div>
</div>
</div>

<div class="container" id="coordination" style="display:none;">
<div class="card">
<h2>Coordination</h2>
<form id="coordForm">
<input type="text" placeholder="نام و نام خانوادگی کوردیناتور" name="coordName" required>
<input type="text" placeholder="نام و نام خانوادگی کارشناس" name="expertName" required>
<select name="trainingTitle" required>
<option value="آموزش دوره اول">آموزش دوره اول</option>
<option value="آموزش دوره دوم">آموزش دوره دوم</option>
<option value="آموزش دوره‌ای">آموزش دوره‌ای</option>
<option value="آموزش همراهی">آموزش همراهی</option>
</select>
<textarea placeholder="توضیحات (اختیاری)" name="desc"></textarea>
<input type="number" placeholder="تعداد اعضا دوره" name="members" required>
<input type="date" name="date" required>
<button type="submit">ثبت</button>
</form>
<div id="coordList"></div>
</div>
</div>

<div class="container" id="dashboard" style="display:none;">
<div class="dashboard">
<canvas id="chart1"></canvas>
<canvas id="chart2"></canvas>
<canvas id="chart3"></canvas>
<canvas id="chart4"></canvas>
</div>
<h3>لیست فرم‌ها و وضعیت تایید/رد</h3>
<div id="allForms"></div>
</div>

<div class="login-container" id="login">
<div class="login-box">
<h2>ورود</h2>
<input type="text" id="username" placeholder="نام کاربری">
<input type="password" id="password" placeholder="رمز عبور">
<button onclick="login()">ورود</button>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let currentPage = 'home';
let role = ''; // trainer یا manager
const pages = ['home','trainers','coordination','dashboard'];
const navLinks = document.querySelectorAll('nav a');
navLinks.forEach(link=>{
link.addEventListener('click', (e)=>{
e.preventDefault();
pages.forEach(p=>document.getElementById(p).style.display='none');
const page = link.getAttribute('data-page');
document.getElementById(page).style.display='block';
navLinks.forEach(l=>l.classList.remove('active'));
link.classList.add('active');
});
});

let trainerData=[], coordData=[];

function renderLists(){
const trainerList = document.getElementById('trainerList');
trainerList.innerHTML='';
trainerData.forEach((d,i)=>{
const div = document.createElement('div');
div.className='list-entry';
div.innerHTML=`${d.trainerName} - ${d.trainingTitle} - ${d.date} <span class="status-${d.status || 'pending'}">${d.status || 'در حال بررسی'}</span>`;
if(role==='trainer') { 
const btn = document.createElement('button'); 
btn.textContent='حذف'; 
btn.onclick=()=>{trainerData.splice(i,1); renderLists(); updateCharts(); renderAllForms();}
div.appendChild(btn);}
trainerList.appendChild(div);
});

const coordList = document.getElementById('coordList');
coordList.innerHTML='';
coordData.forEach((d,i)=>{
const div = document.createElement('div');
div.className='list-entry';
div.innerHTML=`${d.coordName} / ${d.expertName} - ${d.trainingTitle} - ${d.date} <span class="status-${d.status || 'pending'}">${d.status || 'در حال بررسی'}</span>`;
if(role==='trainer') { 
const btn = document.createElement('button'); 
btn.textContent='حذف'; 
btn.onclick=()=>{coordData.splice(i,1); renderLists(); updateCharts(); renderAllForms();}
div.appendChild(btn);}
coordList.appendChild(div);
});
}

function renderAllForms(){
const allForms = document.getElementById('allForms');
allForms.innerHTML='';
trainerData.forEach((d,i)=>{
const div = document.createElement('div');
div.className='list-entry';
div.innerHTML=`مربی: ${d.trainerName} - ${d.trainingTitle} - ${d.date} <span class="status-${d.status || 'pending'}">${d.status || 'در حال بررسی'}</span>`;
if(role==='manager'){
const approve = document.createElement('button'); approve.textContent='تایید'; approve.onclick=()=>{d.status='تایید'; renderLists(); renderAllForms();}
const reject = document.createElement('button'); reject.textContent='رد'; reject.onclick=()=>{d.status='رد'; renderLists(); renderAllForms();}
div.appendChild(approve); div.appendChild(reject);
}
allForms.appendChild(div);
});
coordData.forEach((d,i)=>{
const div = document.createElement('div');
div.className='list-entry';
div.innerHTML=`Coord: ${d.coordName} / ${d.expertName} - ${d.trainingTitle} - ${d.date} <span class="status-${d.status || 'pending'}">${d.status || 'در حال بررسی'}</span>`;
if(role==='manager'){
const approve = document.createElement('button'); approve.textContent='تایید'; approve.onclick=()=>{d.status='تایید'; renderLists(); renderAllForms();}
const reject = document.createElement('button'); reject.textContent='رد'; reject.onclick=()=>{d.status='رد'; renderLists(); renderAllForms();}
div.appendChild(approve); div.appendChild(reject);
}
allForms.appendChild(div);
});
}

const charts = [];
const ctxIds = ['chart1','chart2','chart3','chart4'];
ctxIds.forEach((id,i)=>{
const ctx = document.getElementById(id).getContext('2d');
charts.push(new Chart(ctx,{
type:'bar',
data:{labels:['تعداد ثبت‌ها'], datasets:[{label:id,data:[0], backgroundColor:['#3b82f6','#10b981','#f59e0b','#ef4444'][i]}]},
options:{responsive:true, plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true}}}
}));
});

function updateCharts(){
const labels = ['آموزش دوره اول','آموزش دوره دوم','آموزش دوره‌ای','آموزش همراهی'];
const counts = labels.map(l=>trainerData.filter(d=>d.trainingTitle===l).length + coordData.filter(d=>d.trainingTitle===l).length);
charts.forEach((chart,i)=>{ chart.data.datasets[0].data=[counts[i]]; chart.update(); });
}

document.getElementById('trainerForm').addEventListener('submit', function(e){
e.preventDefault();
const f=e.target;
trainerData.push({
trainerName:f.trainerName.value,
trainingTitle:f.trainingTitle.value,
desc:f.desc.value,
newJoiners:f.newJoiners.value,
date:f.date.value,
status:'pending'
});
f.reset(); updateCharts(); renderLists(); renderAllForms(); alert('ثبت مربی با موفقیت انجام شد.');
});

document.getElementById('coordForm').addEventListener('submit', function(e){
e.preventDefault();
const f=e.target;
coordData.push({
coordName:f.coordName.value,
expertName:f.expertName.value,
trainingTitle:f.trainingTitle.value,
desc:f.desc.value,
members:f.members.value,
date:f.date.value,
status:'pending'
});
f.reset(); updateCharts(); renderLists(); renderAllForms(); alert('ثبت Coordination با موفقیت انجام شد.');
});

function login(){
const u=document.getElementById('username').value;
const p=document.getElementById('password').value;
if(u==='manager' && p==='snapp123'){role='manager'; showAfterLogin();}
else if(u==='trainer' && p==='trainer'){role='trainer'; showAfterLogin();}
else alert('نام کاربری یا رمز عبور اشتباه است');
}

function showAfterLogin(){
document.getElementById('login').style.display='none';
document.getElementById(currentPage).style.display='block';
alert('ورود موفق');
}

</script>
</body>
</html>
