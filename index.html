<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QA TEAM Platform</title>
<style>
    body { font-family: Calibri, sans-serif; margin:0; padding:0; background:#f5f5f5; }
    header { background:#1b1f3b; color:#fff; padding:20px; text-align:center; font-size:24px; }
    nav { background:#2c2f54; display:flex; justify-content:center; padding:10px; }
    nav a { color:#fff; text-decoration:none; margin:0 15px; padding:8px 15px; border-radius:5px; }
    nav a.active, nav a:hover { background:#00b894; }
    main { padding:20px; }
    .home-text { background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 6px rgba(0,0,0,0.1); margin-bottom:20px; line-height:1.6; }
    .form-container { background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 6px rgba(0,0,0,0.1); margin-bottom:20px; max-width:600px; margin-left:auto; margin-right:auto; }
    input, select, textarea { width:100%; padding:10px; margin:10px 0; border-radius:5px; border:1px solid #ccc; font-family:Calibri; }
    button { padding:10px 20px; border:none; border-radius:5px; background:#00b894; color:#fff; cursor:pointer; font-family:Calibri; }
    button:hover { background:#019974; }
    .dashboard { display:grid; grid-template-columns:repeat(2,1fr); gap:20px; margin-top:20px; }
    .card { background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 6px rgba(0,0,0,0.1); }
    canvas { background:#f0f0f0; border-radius:10px; }
    .form-list { margin-top:20px; }
    .form-item { background:#e3f2fd; padding:10px; border-radius:5px; margin-bottom:10px; display:flex; justify-content:space-between; align-items:center; }
    .status { font-weight:bold; }
    .approved { color:green; }
    .rejected { color:red; }
</style>
</head>
<body>

<header>QA TEAM Platform</header>
<nav>
    <a href="#" class="active" id="home-link">خانه</a>
    <a href="#" id="trainers-link">مربیان</a>
    <a href="#" id="coordination-link">Coordination</a>
    <a href="#" id="dashboard-link">داشبورد مدیریتی</a>
</nav>

<main id="content">

<!-- صفحه Home -->
<div id="home-page">
    <div class="home-text">
        <h2>به پلتفرم تیم آموزش خوش آمدید</h2>
        <p>این پلتفرم حرفه‌ای و سازمانی برای مدیریت تمام فرایندهای آموزشی طراحی شده است. از این پس تمامی آموزش‌ها توسط مربیان ثبت می‌شود و مدیران می‌توانند به صورت دقیق و حرفه‌ای اطلاعات را بررسی و پیگیری کنند.</p>
        <p>ویژگی‌های پنل: مدیریت ثبت و هماهنگی آموزش‌ها، بررسی وضعیت هر درخواست، ارائه نمودارهای تحلیلی، و حفظ سوابق آموزشی به صورت منظم و سازمان‌یافته.</p>
    </div>
</div>

<!-- صفحه ثبت مربی -->
<div id="trainers-page" style="display:none;">
    <div class="form-container">
        <h3>ثبت مربی جدید</h3>
        <form id="trainer-form">
            <input type="text" name="name" placeholder="نام و نام خانوادگی">
            <input type="text" name="department" value="CS_Specialist_QA/Training" readonly>
            <select name="training-title">
                <option value="دوره اول">دوره اول</option>
                <option value="دوره دوم">دوره دوم</option>
                <option value="آموزش دوره ای">آموزش دوره ای</option>
                <option value="آموزش همراهی">آموزش همراهی</option>
            </select>
            <input type="number" name="num-members" placeholder="تعداد اعضا">
            <textarea name="description" placeholder="اختیاری"></textarea>
            <button type="submit">ثبت</button>
        </form>
        <div class="form-list" id="trainer-list"></div>
    </div>
</div>

<!-- صفحه Coordination -->
<div id="coordination-page" style="display:none;">
    <div class="form-container">
        <h3>ثبت Coordination</h3>
        <form id="coordination-form">
            <input type="text" name="coordinator-name" placeholder="نام و نام خانوادگی">
            <input type="text" name="expert-name" placeholder="نام و نام خانوادگی کارشناس">
            <input type="date" name="request-date">
            <select name="training-title">
                <option value="دوره اول">دوره اول</option>
                <option value="دوره دوم">دوره دوم</option>
                <option value="آموزش دوره ای">آموزش دوره ای</option>
                <option value="آموزش همراهی">آموزش همراهی</option>
            </select>
            <input type="number" name="num-members" placeholder="تعداد اعضا">
            <textarea name="description" placeholder="اختیاری"></textarea>
            <button type="submit">ثبت</button>
        </form>
        <div class="form-list" id="coordination-list"></div>
    </div>
</div>

<!-- صفحه داشبورد مدیریتی -->
<div id="dashboard-page" style="display:none;">
    <div class="dashboard">
        <div class="card">
            <h3>آموزش دوره اول</h3>
            <canvas id="chart1"></canvas>
        </div>
        <div class="card">
            <h3>آموزش دوره دوم</h3>
            <canvas id="chart2"></canvas>
        </div>
        <div class="card">
            <h3>آموزش دوره ای</h3>
            <canvas id="chart3"></canvas>
        </div>
        <div class="card">
            <h3>آموزش همراهی</h3>
            <canvas id="chart4"></canvas>
        </div>
    </div>
</div>

</main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let currentUser = null;
const users = { manager: 'snapp123', trainer: 'trainer' };
const forms = { trainer:[], coordination:[] };

// مدیریت صفحات
const homeLink = document.getElementById('home-link');
const trainersLink = document.getElementById('trainers-link');
const coordinationLink = document.getElementById('coordination-link');
const dashboardLink = document.getElementById('dashboard-link');
const homePage = document.getElementById('home-page');
const trainersPage = document.getElementById('trainers-page');
const coordinationPage = document.getElementById('coordination-page');
const dashboardPage = document.getElementById('dashboard-page');

function showPage(page) {
    homePage.style.display = 'none';
    trainersPage.style.display = 'none';
    coordinationPage.style.display = 'none';
    dashboardPage.style.display = 'none';
    homeLink.classList.remove('active');
    trainersLink.classList.remove('active');
    coordinationLink.classList.remove('active');
    dashboardLink.classList.remove('active');
    page.style.display = 'block';
}

homeLink.addEventListener('click', () => { showPage(homePage); homeLink.classList.add('active'); });
trainersLink.addEventListener('click', () => { showPage(trainersPage); trainersLink.classList.add('active'); });
coordinationLink.addEventListener('click', () => { showPage(coordinationPage); coordinationLink.classList.add('active'); });
dashboardLink.addEventListener('click', () => { showPage(dashboardPage); dashboardLink.classList.add('active'); });

// ورود
function loginPage(){
    const username = prompt("نام کاربری را وارد کنید:");
    const password = prompt("رمز عبور را وارد کنید:");
    if(users[username] && users[username]===password){
        currentUser=username;
        alert('ورود موفق!');
        showPage(homePage);
    } else { alert('نام کاربری یا رمز اشتباه است'); loginPage(); }
}
loginPage();

// ثبت مربی
document.getElementById('trainer-form').addEventListener('submit', function(e){
    e.preventDefault();
    const data = Object.fromEntries(new FormData(this).entries());
    data.status='در انتظار تایید';
    data.user=currentUser;
    forms.trainer.push(data);
    this.reset();
    renderForms();
    updateCharts();
});
document.getElementById('coordination-form').addEventListener('submit', function(e){
    e.preventDefault();
    const data = Object.fromEntries(new FormData(this).entries());
    data.status='در انتظار تایید';
    data.user=currentUser;
    forms.coordination.push(data);
    this.reset();
    renderForms();
    updateCharts();
});

function renderForms(){
    const list = document.getElementById('trainer-list');
    list.innerHTML='';
    forms.trainer.forEach((f,i)=>{
        let div=document.createElement('div');
        div.className='form-item';
        div.innerHTML=`
            <span>${f.name} - ${f.training-title} - <span class="status ${f.status==='تایید شده'?'approved':'rejected'}">${f.status}</span></span>
            ${currentUser==='trainer' && f.user===currentUser?'<button onclick="deleteForm('+i+',\'trainer\')">حذف</button>':''}
            ${currentUser==='manager'?`<button onclick="approveForm(${i},'trainer')">تایید</button><button onclick="rejectForm(${i},'trainer')">رد</button>`:''}
        `;
        list.appendChild(div);
    });

    const cList=document.getElementById('coordination-list');
    cList.innerHTML='';
    forms.coordination.forEach((f,i)=>{
        let div=document.createElement('div');
        div.className='form-item';
        div.innerHTML=`
            <span>${f.coordinatorName} - ${f.expertName} - ${f.trainingTitle} - <span class="status ${f.status==='تایید شده'?'approved':'rejected'}">${f.status}</span></span>
            ${currentUser==='trainer' && f.user===currentUser?'<button onclick="deleteForm('+i+',\'coordination\')">حذف</button>':''}
            ${currentUser==='manager'?`<button onclick="approveForm(${i},'coordination')">تایید</button><button onclick="rejectForm(${i},'coordination')">رد</button>`:''}
        `;
        cList.appendChild(div);
    });
}

function deleteForm(index,type){
    forms[type].splice(index,1);
    renderForms();
    updateCharts();
}
function approveForm(index,type){
    forms[type][index].status='تایید شده';
    renderForms();
}
function rejectForm(index,type){
    forms[type][index].status='رد شده';
    renderForms();
}

// نمودارها
const charts = [];
for(let i=1;i<=4;i++){
    const ctx = document.getElementById('chart'+i).getContext('2d');
    charts.push(new Chart(ctx, {
        type:'bar',
        data:{ labels:[], datasets:[{label:'تعداد ثبت', data:[], backgroundColor:'#00b894'}]},
        options:{ responsive:true, plugins:{ legend:{ display:false }}, scales:{ y:{ beginAtZero:true } } }
    }));
}
function updateCharts(){
    const titles=['دوره اول','دوره دوم','آموزش دوره ای','آموزش همراهی'];
    titles.forEach((title,i)=>{
        const count= forms.trainer.filter(f=>f.training-title===title).length
                   + forms.coordination.filter(f=>f.trainingTitle===title).length;
        charts[i].data.labels=['تعداد ثبت'];
        charts[i].data.datasets[0].data=[count];
        charts[i].update();
    });
}
</script>

</body>
</html>
