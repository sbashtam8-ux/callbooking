<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QA / Training Platform</title>
<style>
    body {
        font-family: 'Calibri', sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
        color: #333;
    }
    header {
        background: #1e1e2f;
        color: #fff;
        padding: 15px 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    header h1 {
        margin: 0;
        font-size: 28px;
        font-weight: bold;
    }
    nav a {
        color: #fff;
        text-decoration: none;
        margin-left: 20px;
        padding: 5px 10px;
        border-radius: 5px;
    }
    nav a.active, nav a:hover {
        background: #4caf50;
    }
    .container {
        padding: 30px;
    }
    /* صفحه ورود */
    .login-container {
        max-width: 400px;
        margin: 100px auto;
        background: #fff;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    .login-container h2 {
        text-align: center;
        margin-bottom: 20px;
        color: #1e1e2f;
    }
    .login-container input {
        width: 100%;
        padding: 12px;
        margin: 10px 0;
        border-radius: 8px;
        border: 1px solid #ccc;
    }
    .login-container button {
        width: 100%;
        padding: 12px;
        background: #1e1e2f;
        color: #fff;
        font-weight: bold;
        border: none;
        border-radius: 8px;
        cursor: pointer;
    }
    .login-container button:hover {
        background: #4caf50;
    }
    /* صفحه Home */
    .home-text {
        background: #fff;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        line-height: 1.8;
        font-size: 18px;
    }
    /* فرم‌ها */
    .form-container {
        background: #fff;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        margin-bottom: 30px;
    }
    .form-container label {
        display: block;
        margin: 10px 0 5px;
        font-weight: bold;
    }
    .form-container input, 
    .form-container select, 
    .form-container textarea {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        margin-bottom: 10px;
    }
    .form-container textarea::placeholder {
        color: #888;
    }
    .form-container button {
        padding: 12px 25px;
        background: #1e1e2f;
        color: #fff;
        border: none;
        border-radius: 10px;
        cursor: pointer;
    }
    .form-container button:hover {
        background: #4caf50;
    }
    /* داشبورد */
    .dashboard {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 30px;
    }
    .dashboard-card {
        background: #fff;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        text-align: center;
    }
    canvas {
        width: 100% !important;
        height: 250px !important;
    }
    .form-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }
    .form-table th, .form-table td {
        border: 1px solid #ccc;
        padding: 8px;
        text-align: center;
    }
    .form-table th {
        background-color: #f0f0f0;
    }
    .status-approved {color: green; font-weight:bold;}
    .status-rejected {color: red; font-weight:bold;}
</style>
</head>
<body>

<!-- صفحه ورود -->
<div class="login-container" id="loginPage">
    <h2>ورود به QA / Training Platform</h2>
    <input type="text" id="username" placeholder="نام کاربری">
    <input type="password" id="password" placeholder="رمز عبور">
    <button onclick="login()">ورود</button>
</div>

<!-- صفحه اصلی -->
<div id="mainPage" style="display:none;">
    <header>
        <h1>QA / Training</h1>
        <nav>
            <a href="#" class="active" onclick="showHome()">خانه</a>
            <a href="#" onclick="showForm('trainer')">مربی</a>
            <a href="#" onclick="showForm('coordination')">Coordination</a>
            <a href="#" onclick="showDashboard()">داشبورد مدیریتی</a>
        </nav>
    </header>

    <div class="container" id="homePage">
        <div class="home-text">
            <p>این پلتفرم حرفه‌ای برای مدیریت تیم آموزش طراحی شده است.  
            از این پس تمامی فرایندهای آموزشی توسط مربیان در این سامانه ثبت می‌شود.  
            مدیران قادر خواهند بود تمامی فرم‌ها را مشاهده، تایید یا رد کنند و وضعیت هر ثبت برای مربیان مشخص خواهد شد.  
            فرم‌ها و داشبوردها با طراحی مدرن، سه‌بعدی و سازمانی و فونت Calibri ارائه شده‌اند.</p>
        </div>
    </div>

    <!-- فرم مربی -->
    <div class="container form-container" id="trainerForm" style="display:none;">
        <h2>ثبت فرم مربی</h2>
        <label>نام و نام خانوادگی:</label>
        <input type="text" id="trainerName">
        
        <label>سمت:</label>
        <input type="text" value="CS_Specialist_QA/Training" disabled>
        
        <label>عنوان آموزشی:</label>
        <select id="trainingTitle">
            <option>آموزش دوره اول</option>
            <option>آموزش دوره دوم</option>
            <option>آموزش دوره‌ای</option>
            <option>آموزش همراهی</option>
        </select>
        
        <label>توضیحات:</label>
        <textarea placeholder="اختیاری" id="trainingDesc"></textarea>

        <label>تعداد نیوجوینرها:</label>
        <input type="number" id="newJoiners">

        <button onclick="submitTrainerForm()">ثبت فرم</button>

        <table class="form-table" id="trainerTable">
            <thead>
                <tr>
                    <th>نام مربی</th>
                    <th>عنوان آموزشی</th>
                    <th>تعداد</th>
                    <th>توضیحات</th>
                    <th>عملیات</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- فرم Coordination -->
    <div class="container form-container" id="coordinationForm" style="display:none;">
        <h2>ثبت فرم Coordination</h2>
        <label>نام و نام خانوادگی کوردیناتور:</label>
        <input type="text" id="coordName">

        <label>نام و نام خانوادگی کارشناس:</label>
        <input type="text" id="expertName">

        <label>تاریخ ثبت درخواست:</label>
        <input type="date" id="coordDate">

        <label>تعداد اعضا دوره:</label>
        <input type="number" id="courseMembers">

        <button onclick="submitCoordForm()">ثبت فرم</button>

        <table class="form-table" id="coordTable">
            <thead>
                <tr>
                    <th>نام کوردیناتور</th>
                    <th>نام کارشناس</th>
                    <th>تاریخ</th>
                    <th>تعداد اعضا</th>
                    <th>وضعیت</th>
                    <th>عملیات</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- داشبورد مدیریتی -->
    <div class="container" id="dashboardPage" style="display:none;">
        <h2>داشبورد مدیریتی</h2>
        <div class="dashboard">
            <div class="dashboard-card">
                <h3>آموزش دوره اول</h3>
                <canvas id="chart1"></canvas>
            </div>
            <div class="dashboard-card">
                <h3>آموزش دوره دوم</h3>
                <canvas id="chart2"></canvas>
            </div>
            <div class="dashboard-card">
                <h3>آموزش دوره‌ای</h3>
                <canvas id="chart3"></canvas>
            </div>
            <div class="dashboard-card">
                <h3>آموزش همراهی</h3>
                <canvas id="chart4"></canvas>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    let users = {manager:"snapp123", trainer:"trainer"};
    let trainerData = [];
    let coordData = [];

    function login(){
        const user = document.getElementById('username').value;
        const pass = document.getElementById('password').value;
        if(users[user] && users[user]===pass){
            document.getElementById('loginPage').style.display='none';
            document.getElementById('mainPage').style.display='block';
        } else {
            alert("نام کاربری یا رمز عبور اشتباه است!");
        }
    }

    function showForm(type){
        showHome(false);
        if(type==='trainer'){
            document.getElementById('trainerForm').style.display='block';
            document.getElementById('coordinationForm').style.display='none';
        } else {
            document.getElementById('coordinationForm').style.display='block';
            document.getElementById('trainerForm').style.display='none';
        }
    }

    function showDashboard(){
        showHome(false);
        document.getElementById('trainerForm').style.display='none';
        document.getElementById('coordinationForm').style.display='none';
        document.getElementById('dashboardPage').style.display='block';
        updateCharts();
    }

    function showHome(show=true){
        document.getElementById('homePage').style.display = show ? 'block' : 'none';
        document.getElementById('trainerForm').style.display='none';
        document.getElementById('coordinationForm').style.display='none';
        document.getElementById('dashboardPage').style.display='none';
    }

    function submitTrainerForm(){
        let name=document.getElementById('trainerName').value;
        let title=document.getElementById('trainingTitle').value;
        let desc=document.getElementById('trainingDesc').value;
        let nj=document.getElementById('newJoiners').value;
        trainerData.push({name,title,desc,nj});
        updateTrainerTable();
        updateCharts();
        alert("فرم مربی ثبت شد!");
    }

    function submitCoordForm(){
        let coordName=document.getElementById('coordName').value;
        let expertName=document.getElementById('expertName').value;
        let date=document.getElementById('coordDate').value;
        let members=document.getElementById('courseMembers').value;
        coordData.push({coordName,expertName,date,members,status:"در انتظار"});
        updateCoordTable();
        updateCharts();
        alert("فرم Coordination ثبت شد!");
    }

    function deleteTrainer(idx){
        trainerData.splice(idx,1);
        updateTrainerTable();
        updateCharts();
    }

    function approveCoord(idx){
        coordData[idx].status="تایید شد";
        updateCoordTable();
    }

    function rejectCoord(idx){
        coordData[idx].status="رد شد";
        updateCoordTable();
    }

    function updateTrainerTable(){
        let tbody=document.getElementById('trainerTable').querySelector('tbody');
        tbody.innerHTML="";
        trainerData.forEach((t,i)=>{
            tbody.innerHTML+=`<tr>
                <td>${t.name}</td>
                <td>${t.title}</td>
                <td>${t.nj}</td>
                <td>${t.desc}</td>
                <td><button onclick="deleteTrainer(${i})">حذف</button></td>
            </tr>`;
        });
    }

    function updateCoordTable(){
        let tbody=document.getElementById('coordTable').querySelector('tbody');
        tbody.innerHTML="";
        coordData.forEach((c,i)=>{
            tbody.innerHTML+=`<tr>
                <td>${c.coordName}</td>
                <td>${c.expertName}</td>
                <td>${c.date}</td>
                <td>${c.members}</td>
                <td class="${c.status==='تایید شد'?'status-approved':c.status==='رد شد'?'status-rejected':''}">${c.status}</td>
                <td>
                    <button onclick="approveCoord(${i})">تایید</button>
                    <button onclick="rejectCoord(${i})">رد</button>
                    <button onclick="coordDelete(${i})">حذف</button>
                </td>
            </tr>`;
        });
    }

    function coordDelete(idx){
        coordData.splice(idx,1);
        updateCoordTable();
        updateCharts();
    }

    const ctx1=document.getElementById('chart1').getContext('2d');
    const ctx2=document.getElementById('chart2').getContext('2d');
    const ctx3=document.getElementById('chart3').getContext('2d');
    const ctx4=document.getElementById('chart4').getContext('2d');

    let chart1=new Chart(ctx1,{type:'bar',data:{labels:['تعداد'],datasets:[{label:'آموزش دوره اول',data:[0],backgroundColor:'#4caf50'}]}});
    let chart2=new Chart(ctx2,{type:'bar',data:{labels:['تعداد'],datasets:[{label:'آموزش دوره دوم',data:[0],backgroundColor:'#2196f3'}]}});
    let chart3=new Chart(ctx3,{type:'bar',data:{labels:['تعداد'],datasets:[{label:'آموزش دوره‌ای',data:[0],backgroundColor:'#ff9800'}]}});
    let chart4=new Chart(ctx4,{type:'bar',data:{labels:['تعداد'],datasets:[{label:'آموزش همراهی',data:[0],backgroundColor:'#9c27b0'}]}});
    
    function updateCharts(){
        let counts=[0,0,0,0];
        trainerData.forEach(t=>{
            if(t.title==='آموزش دوره اول') counts[0]+=parseInt(t.nj||0);
            else if(t.title==='آموزش دوره دوم') counts[1]+=parseInt(t.nj||0);
            else if(t.title==='آموزش دوره‌ای') counts[2]+=parseInt(t.nj||0);
            else if(t.title==='آموزش همراهی') counts[3]+=parseInt(t.nj||0);
        });
        chart1.data.datasets[0].data=[counts[0]]; chart1.update();
        chart2.data.datasets[0].data=[counts[1]]; chart2.update();
        chart3.data.datasets[0].data=[counts[2]]; chart3.update();
        chart4.data.datasets[0].data=[counts[3]]; chart4.update();
    }
</script>
</body>
</html>
