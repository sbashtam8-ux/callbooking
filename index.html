<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Snapp! Learning Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --primary:#2a9d8f;
  --accent:#e76f51;
  --bg:#f7f9fc;
  --card:#fff;
  --muted:#6b757b;
  --radius:12px;
  --container:1200px;
}
*{box-sizing:border-box;}
html,body{margin:0;padding:0;font-family:'Montserrat',sans-serif;background:var(--bg);color:#081218;height:100%;}
a{color:inherit;text-decoration:none;}
button{cursor:pointer;}
.main-container{max-width:var(--container);margin:20px auto;padding:10px;}
.topbar{display:flex;align-items:center;gap:15px;flex-wrap:wrap;}
.brand{font-weight:800;font-size:1.5rem;background:linear-gradient(90deg,var(--primary),var(--accent));-webkit-background-clip:text;color:transparent;}
.nav-actions{margin-inline-start:auto;display:flex;gap:8px;flex-wrap:wrap;}
.btn{padding:8px 14px;border-radius:8px;border:none;font-weight:700;background:var(--primary);color:#fff;transition:0.2s;}
.btn:hover{opacity:0.85;}
.btn.ghost{background:transparent;color:var(--primary);border:1px solid var(--primary);}
.layout{display:grid;grid-template-columns:220px 1fr;gap:18px;margin-top:18px;}
.sidebar{background:var(--card);border-radius:var(--radius);padding:12px;box-shadow:0 8px 30px rgba(11,23,32,0.06);position:sticky;top:20px;height:calc(100vh - 40px);overflow:auto;}
.nav-sidebar{display:flex;flex-direction:column;gap:6px;margin-top:10px;}
.nav-sidebar button{padding:10px;border-radius:10px;border:0;background:transparent;font-weight:700;text-align:right;display:flex;justify-content:space-between;align-items:center;transition:0.2s;}
.nav-sidebar button.active{background:var(--primary);color:#fff;}
.page{display:none;}
.page.active{display:block;}
.hero{background:linear-gradient(180deg, rgba(0,0,0,0.03), rgba(0,0,0,0.02)),var(--primary);color:#fff;border-radius:16px;padding:28px;position:relative;overflow:hidden;text-align:center;}
.hero-title{font-size:2rem;font-weight:800;margin:6px 0;}
.hero-sub{opacity:0.9;margin:6px 0;font-weight:600;}
.cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-top:12px;}
.card{background:var(--card);border-radius:var(--radius);padding:14px;box-shadow:0 8px 24px rgba(11,23,32,0.06);}
.field{margin-bottom:12px;}
input,select,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid #e6e9ec;font-size:0.95rem;}
textarea{min-height:80px;}
.row{display:flex;gap:10px;}
.row .col{flex:1;}
.status-badge{position:absolute;top:12px;left:12px;background:var(--primary);color:#fff;padding:6px 10px;border-radius:999px;font-weight:700;font-size:0.82rem;}
.flip-wrap{perspective:1000px;}
.flip-card{width:100%;transition:transform .6s;transform-style:preserve-3d;position:relative;}
.flip-front,.flip-back{backface-visibility:hidden;border-radius:10px;padding:12px;position:relative;}
.flip-back{position:absolute;inset:0;transform:rotateY(180deg);background:linear-gradient(180deg,#fff,#fcfff7);}
.flipped{transform:rotateY(180deg);}
.progress{height:8px;background:#eef2f4;border-radius:999px;overflow:hidden;margin-top:8px;}
.progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--primary),#e76f51);width:0%;transition:width .6s ease;}
.kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:12px;}
.kpi{background:var(--card);padding:12px;border-radius:12px;box-shadow:0 8px 18px rgba(11,23,32,0.04);display:flex;flex-direction:column;gap:6px;}
.kpi .num{font-weight:800;font-size:1.4rem;}
.charts{display:grid;grid-template-columns:1fr 420px;gap:12px;margin-top:12px;}
canvas{width:100%!important;height:260px!important;}
.login-page{display:flex;justify-content:center;align-items:center;height:100vh;}
.login-card{background:var(--card);padding:28px;border-radius:16px;box-shadow:0 8px 30px rgba(11,23,32,0.1);width:320px;}
.login-card h2{text-align:center;margin-bottom:20px;font-weight:800;}
.login-card input{margin-bottom:14px;}
.login-card button{width:100%;}
.fade-in{animation:fadeIn .45s ease both;}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
@media (max-width:1000px){.layout{grid-template-columns:1fr}.kpis{grid-template-columns:repeat(2,1fr)}.charts{grid-template-columns:1fr}.cards-grid{grid-template-columns:1fr;}}
</style>
</head>
<body>
<main class="main-container">

<!-- Login -->
<div id="login-page" class="login-page page active">
  <div class="login-card fade-in">
    <h2>ورود به سیستم</h2>
    <form id="login-form">
      <input type="text" id="username" placeholder="نام کاربری" required>
      <input type="password" id="password" placeholder="رمز عبور" required>
      <button type="submit" class="btn">ورود</button>
    </form>
  </div>
</div>

<!-- App Layout -->
<div id="app" class="page">

  <header class="topbar">
    <div class="brand">Snapp!</div>
    <div class="nav-actions">
      <button data-page="home" class="btn">خانه</button>
      <button data-page="trainers" class="btn ghost">مربیان</button>
      <button data-page="dashboard" class="btn ghost">داشبورد</button>
      <button data-page="coordination" class="btn ghost">Coordination</button>
    </div>
  </header>

  <div class="layout">
    <aside class="sidebar">
      <div style="font-weight:800">منوی سریع</div>
      <nav class="nav-sidebar">
        <button data-page="home" class="active">🏠 خانه</button>
        <button data-page="trainers">🎓 مربیان</button>
        <button data-page="dashboard">📊 داشبورد</button>
        <button data-page="coordination">🧭 Coordination</button>
      </nav>
    </aside>

    <section>
      <!-- HOME -->
      <div id="page-home" class="page active fade-in">
        <section class="hero">
          <h1 class="hero-title">Snapp! Learning Platform</h1>
          <p class="hero-sub">پلتفرمی حرفه‌ای برای مدیریت مربیان، Coordination و فرآیند آموزش. طراحی شده برای دمو و استفاده داخلی سازمان.</p>
        </section>
        <div class="cards-grid">
          <div class="card">
            <h3>چرا این پروژه؟</h3>
            <p>این پلتفرم جریان کامل آموزش و مربیان را نشان می‌دهد: ثبت مربیان، پیگیری دوره‌ها، علامت‌گذاری تکمیل و مشاهده نمودارها—all بدون نیاز به بک‌اند.</p>
          </div>
          <div class="card">
            <h3>موارد کاربرد</h3>
            <ul>
              <li>نمایش دمو به مدیران</li>
              <li>پیگیری حضور و آموزش کارشناسان</li>
              <li>خروجی گزارش برای HR</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- TRAINERS -->
      <div id="page-trainers" class="page fade-in">
        <section class="hero">
          <h1 class="hero-title">ثبت مربیان دوره‌های آموزشی</h1>
          <p class="hero-sub">فرم ثبت مربیان و مدیریت وضعیت دوره‌ها</p>
        </section>
        <div class="layout" style="grid-template-columns:520px 1fr;">
          <section class="card">
            <h3>فرم ثبت مربی</h3>
            <form id="trainer-form">
              <div class="field"><label>نام و نام خانوادگی</label><input id="t-name" type="text" placeholder="مثال: علی رضایی" required></div>
              <div class="field"><label>سمت</label><input id="t-unit" type="text" value="CS_Specialist_QA/Training" readonly></div>
              <div class="field"><label>عنوان آموزشی</label><select id="t-course">
                <option>آموزش دوره اول</option>
                <option>آموزش دوره دوم</option>
                <option>آموزش دوره‌ای</option>
                <option>آموزش همراهی</option>
              </select></div>
              <div class="field"><label>تاریخ شروع</label><input id="t-start" type="date"></div>
              <div class="field"><label>وضعیت</label><select id="t-status"><option>در حال آموزش</option><option>تکمیل‌شده</option><option>در انتظار</option></select></div>
              <div class="field"><label>توضیحات</label><textarea id="t-note" placeholder="اختیاری"></textarea></div>
              <div style="display:flex;gap:10px;"><button class="btn" type="submit">ثبت مربی</button><button type="button" id="t-clear" class="btn ghost">پاک‌سازی</button></div>
            </form>
          </section>
          <section>
            <div class="card"><h3>مربیان در حال آموزش</h3><div id="t-active" class="cards-grid"></div></div>
            <div class="card" style="margin-top:12px"><h3>آموزش‌های تکمیل‌شده</h3><div id="t-completed" class="cards-grid"></div></div>
          </section>
        </div>
      </div>

      <!-- DASHBOARD -->
      <div id="page-dashboard" class="page fade-in">
        <h2>داشبورد مدیریتی</h2>
        <div class="kpis">
          <div class="kpi"><div class="num" id="k-total">—</div><div class="label">تعداد کل مربیان</div></div>
          <div class="kpi"><div class="num" id="k-active">—</div><div class="label">در حال آموزش</div></div>
          <div class="kpi"><div class="num" id="k-completed">—</div><div class="label">تکمیل‌شده</div></div>
          <div class="kpi"><div class="num" id="k-percent">—%</div><div class="label">درصد تکمیل</div></div>
        </div>
        <div class="charts">
          <div class="chart-card"><canvas id="pie-status"></canvas></div>
          <div class="chart-card"><canvas id="bar-courses"></canvas></div>
        </div>
        <div class="charts">
          <div class="chart-card"><canvas id="line-timeline"></canvas></div>
        </div>
      </div>

      <!-- COORDINATION -->
      <div id="page-coordination" class="page fade-in">
        <section class="hero">
          <h1 class="hero-title">ثبت کارشناسان نیازمند دوره همراهی</h1>
          <p class="hero-sub">Coordination panel برای ثبت کارشناسان و مدیریت وضعیت</p>
        </section>
        <div class="layout" style="grid-template-columns:520px 1fr;">
          <section class="card">
            <h3>فرم ثبت نیاز به همیاری</h3>
            <form id="coord-form">
              <div class="field"><label>نام کارشناس</label><input id="c-name" type="text" placeholder="مثال: سارا حسینی" required></div>
              <div class="field"><label>نام کوردیناتور</label><input id="c-coord" type="text" placeholder="مثال: محمد موسوی" required></div>
              <div class="field"><label>علت نیاز</label><input id="c-reason" type="text" placeholder="علت نیاز به همیاری"></div>
              <div class="field"><label>تاریخ ثبت درخواست</label><input id="c-date" type="date"></div>
              <div class="field"><label>وضعیت</label><select id="c-status"><option>در انتظار</option><option>در حال بررسی</option><option>همیاری شروع شده</option><option>تکمیل‌شده</option></select></div>
              <div style="display:flex;gap:10px;"><button class="btn" type="submit">ثبت کارشناس</button><button type="button" id="c-clear" class="btn ghost">پاک‌سازی لیست</button></div>
            </form>
          </section>
          <section>
            <div class="card"><h3>کارشناسان ثبت‌شده</h3><div id="coord-list" class="cards-grid"></div></div>
          </section>
        </div>
      </div>

    </section>
  </div>
</div>

</main>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const loginPage=document.getElementById('login-page');
const appPage=document.getElementById('app');
const loginForm=document.getElementById('login-form');

loginForm.addEventListener('submit',e=>{
  e.preventDefault();
  const u=document.getElementById('username').value.trim();
  const p=document.getElementById('password').value.trim();
  if((u==='manager' && p==='snapp123') || (u==='trainer' && p==='traininig')){
    loginPage.classList.remove('active');
    appPage.classList.add('active');
    showPage('home');
  } else{
    alert('نام کاربری یا رمز عبور اشتباه است');
  }
});

const pages=['home','trainers','dashboard','coordination'];
function showPage(p){
  pages.forEach(pp=>{
    document.getElementById('page-'+pp).classList.remove('active');
    document.querySelector('.nav-sidebar button[data-page="'+pp+'"]').classList.remove('active');
    document.querySelector('.nav-actions button[data-page="'+pp+'"]').classList.remove('active');
  });
  document.getElementById('page-'+p).classList.add('active');
  document.querySelector('.nav-sidebar button[data-page="'+p+'"]').classList.add('active');
  document.querySelector('.nav-actions button[data-page="'+p+'"]').classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
  if(p==='dashboard') updateDashboard();
}

document.querySelectorAll('.nav-sidebar button').forEach(b=>b.addEventListener('click',()=>showPage(b.dataset.page)));
document.querySelectorAll('.nav-actions button').forEach(b=>b.addEventListener('click',()=>showPage(b.dataset.page)));

// --- TRAINERS ---
const tForm=document.getElementById('trainer-form');
const tActive=document.getElementById('t-active');
const tCompleted=document.getElementById('t-completed');
const tClear=document.getElementById('t-clear');
let trainers=JSON.parse(localStorage.getItem('cb_trainers_v1')||'[]');
function saveTr(){localStorage.setItem('cb_trainers_v1',JSON.stringify(trainers));}
function renderTr(){tActive.innerHTML='';tCompleted.innerHTML='';trainers.forEach((t,idx)=>{
  const card=document.createElement('article');card.className='card fade-in';
  const title=document.createElement('div');title.innerHTML=`<strong>${t.name}</strong>`;
  const meta=document.createElement('div');meta.className='meta';meta.innerHTML=`سمت: ${t.unit} · ${t.course} · ${t.start||'-'}`;
  const note=document.createElement('div');note.className='meta';note.innerHTML=t.note?t.note:'';
  card.append(title,meta,note);
  if(t.status==='تکمیل‌شده') tCompleted.appendChild(card); else tActive.appendChild(card);
});}
tForm.addEventListener('submit',e=>{
  e.preventDefault();
  trainers.push({
    name:document.getElementById('t-name').value,
    unit:document.getElementById('t-unit').value,
    course:document.getElementById('t-course').value,
    start:document.getElementById('t-start').value,
    status:document.getElementById('t-status').value,
    note:document.getElementById('t-note').value
  });
  saveTr();renderTr();tForm.reset();document.getElementById('t-unit').value='CS_Specialist_QA/Training';
});
tClear.addEventListener('click',()=>{trainers=[];saveTr();renderTr();});
renderTr();

// --- COORDINATION ---
const cForm=document.getElementById('coord-form');
const cList=document.getElementById('coord-list');
const cClear=document.getElementById('c-clear');
let coords=JSON.parse(localStorage.getItem('cb_coords_v1')||'[]');
function saveC(){localStorage.setItem('cb_coords_v1',JSON.stringify(coords));}
function renderC(){cList.innerHTML='';coords.forEach(c=>{
  const card=document.createElement('article');card.className='card fade-in';
  card.innerHTML=`<strong>${c.name}</strong> | کوردیناتور: ${c.coord}<br>تاریخ: ${c.date||'-'} | وضعیت: ${c.status}`;
  cList.appendChild(card);
});}
cForm.addEventListener('submit',e=>{
  e.preventDefault();
  coords.push({
    name:document.getElementById('c-name').value,
    coord:document.getElementById('c-coord').value,
    reason:document.getElementById('c-reason').value,
    date:document.getElementById('c-date').value,
    status:document.getElementById('c-status').value
  });
  saveC();renderC();cForm.reset();
});
cClear.addEventListener('click',()=>{coords=[];saveC();renderC();});
renderC();

// --- DASHBOARD ---
function updateDashboard(){
  const total=trainers.length;
  const completed=trainers.filter(t=>t.status==='تکمیل‌شده').length;
  const active=total-completed;
  document.getElementById('k-total').innerText=total;
  document.getElementById('k-completed').innerText=completed;
  document.getElementById('k-active').innerText=active;
  document.getElementById('k-percent').innerText=total?Math.round(completed/total*100)+'%':'—';
  // Pie chart
  const ctxPie=document.getElementById('pie-status').getContext('2d');
  new Chart(ctxPie,{type:'pie',data:{labels:['در حال آموزش','تکمیل‌شده'],datasets:[{data:[active,completed],backgroundColor:['#2a9d8f','#e76f51']}]},options:{responsive:true}});
  // Bar courses
  const courses={};
  trainers.forEach(t=>courses[t.course]=(courses[t.course]||0)+1);
  const ctxBar=document.getElementById('bar-courses').getContext('2d');
  new Chart(ctxBar,{type:'bar',data:{labels:Object.keys(courses),datasets:[{label:'تعداد',data:Object.values(courses),backgroundColor:'#2a9d8f'}]},options:{responsive:true}});
  // Line timeline (dummy)
  const ctxLine=document.getElementById('line-timeline').getContext('2d');
  new Chart(ctxLine,{type:'line',data:{labels:trainers.map((t,i)=>t.name),datasets:[{label:'پیشرفت',data:trainers.map((t,i)=>i*10),fill:false,borderColor:'#2a9d8f'}]},options:{responsive:true}});
}
</script>
</body>
</html>
